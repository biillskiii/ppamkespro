(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[751],{659:function(e,t,s){Promise.resolve().then(s.bind(s,2938))},2938:function(e,t,s){"use strict";s.r(t);var n=s(7437),a=s(2265),r=s(3153),i=s(6463),c=s(8441),o=s(555),l=s(1942),u=s(8472);t.default=()=>{let[e,t]=(0,a.useState)(!1),[s,m]=(0,a.useState)({}),[p,h]=(0,a.useState)([]),[d,f]=(0,a.useState)(!1),b=(0,i.useRouter)(),x=sessionStorage.getItem("accessToken"),v=(0,a.useRef)(null),[y,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f(!0),fetch("https://swhytbiyrgsovsl-evfpthsuvq-et.a.run.app/instrument").then(e=>{if(!e.ok)throw Error("Network response was not ok: ".concat(e.statusText));return e.json()}).then(e=>{if(console.log("Data fetched:",e),e&&Array.isArray(e.data)){let t=e.data.filter(e=>e.number>=14&&e.number<=17);console.log("Filtered Data:",t),h(t)}else throw console.error("Invalid data format received:",e),Error("Invalid data format")}).catch(e=>{console.error("Error fetching data:",e)}).finally(()=>{f(!1)})},[]),(0,a.useEffect)(()=>{p.length>0&&t(p.every(e=>"sub"===e.type?e.sub.every(e=>s["input-".concat(e.id)]):s["input-".concat(e.number)]))},[s,p]);let w=(e,t)=>{m(s=>({...s,[e]:t}))},g=async e=>{e.preventDefault();try{N(!0);let t=new FormData(e.target),s=Object.fromEntries(t.entries()),n=[{instrumentId:20,value:s["input-14"],score:0,comment:s["input-14_comment"]},{instrumentId:21,value:s["input-15"],score:0,comment:s["input-15_comment"]},{instrumentId:22,value:s["input-16"],score:0,comment:s["input-16_comment"]},{instrumentId:23,value:s["input-17"],score:0,comment:s["input-17_comment"]}],a=await u.Z.post("https://swhytbiyrgsovsl-evfpthsuvq-et.a.run.app/response",n,{headers:{Authorization:"Bearer ".concat(x)}});200===a.status&&b.push("/assessment/bagian-1/assessment-4")}catch(e){console.error("Error posting data:",e)}finally{N(!1)}};return d?(0,n.jsx)("div",{className:"min-h-screen w-full flex justify-center items-center",children:(0,n.jsx)(l.fCD,{className:"animate-spin text-accent",size:50})}):(0,n.jsxs)("div",{className:"bg-[#F1F1F7] h-screen overflow-x-hidden",children:[(0,n.jsx)(o.Z,{activeId:2,onClick:()=>{v.current&&(N(!1),v.current.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})))}}),(0,n.jsxs)("div",{className:"w-full ml-[344px] space-y-6 p-4",children:[(0,n.jsxs)("div",{className:"bg-[#1446AB] p-4 rounded-2xl w-[1048px] h-[115px]",children:[(0,n.jsx)("p",{className:"text-white font-extrabold text-xl",children:"BAGIAN Iâ€”KESIAPAN KESELURUHAN TINGKAT NASIONAL: KEBIJAKAN, KOORDINASI DAN SUMBER DAYA"}),(0,n.jsx)("hr",{className:"w-full my-4 mx-auto"}),(0,n.jsx)("p",{className:"uppercase font-medium text-base text-white",children:"Data kespro di tingkat nasional dan sub-nasional"})]}),(0,n.jsxs)("form",{ref:v,onSubmit:e=>{g(e),N(!0)},className:"flex flex-col gap-y-5",children:[p.map((e,t)=>(0,n.jsx)("div",{className:"",children:(0,n.jsx)(r.Z,{type:e.type,no:e.number,label:e.question,name:"input-".concat(e.number),options:e.choice?e.choice.map(e=>({value:e.value,label:e.value})):[],placeholder:"Komentar/Referensi/Rincian...",onChange:(e,t)=>w(e,t),subname:e.subname,subquestions:e.sub||[]})},t)),(0,n.jsxs)("div",{className:"flex items-center ml-80 my-10 gap-x-5 w-3/12",children:[(0,n.jsx)(c.Z,{label:"Sebelumnya",onClick:()=>{b.push("/assessment/bagian-1/assessment-2")},withIcon:"left",variant:"secondary",type:"button"}),(0,n.jsx)(c.Z,{label:"Berikutnya",withIcon:"right",type:"submit"})]})]})]})]})}}},function(e){e.O(0,[699,452,240,485,97,971,23,744],function(){return e(e.s=659)}),_N_E=e.O()}]);