(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{7237:function(e,t,n){Promise.resolve().then(n.bind(n,8218))},8218:function(e,t,n){"use strict";n.r(t);var s=n(7437),a=n(8441),c=n(3153),o=n(555),r=n(8472),u=n(9714),i=n(6463),l=n(2265),m=n(1942);n(7138),t.default=()=>{let[e,t]=(0,l.useState)(!1),[n,p]=(0,l.useState)({}),[d,h]=(0,l.useState)([]),[b,f]=(0,l.useState)(!1),[_,v]=(0,l.useState)(null),[x,y]=(0,l.useState)(""),I=(0,i.useRouter)(),g=(0,l.useRef)(null),[w,N]=(0,l.useState)(!1),j=sessionStorage.getItem("accessToken");(0,l.useEffect)(()=>{if(j)try{let e=(0,u.o)(j);console.log("Decoded Token:",e),y(e.username||""),setStatus(e.status||"")}catch(e){console.error("Failed to decode token:",e)}else I.push("/")},[I]),(0,l.useEffect)(()=>{f(!0),fetch("https://swhytbiyrgsovsl-evfpthsuvq-et.a.run.app/instrument").then(e=>{if(!e.ok)throw Error("Network response was not ok: ".concat(e.statusText));return e.json()}).then(e=>{if(console.log("Data fetched:",e),e&&Array.isArray(e.data)){let t=e.data.filter(e=>e.number>=68&&e.number<=73);console.log("Filtered Data:",t),h(t)}else throw console.error("Invalid data format received:",e),Error("Invalid data format")}).catch(e=>{console.error("Error fetching data:",e)}).finally(()=>{f(!1)})},[]),(0,l.useEffect)(()=>{d.length>0&&t(d.every(e=>n["input-".concat(e.number)]))},[n,d]);let E=(e,t)=>{p(n=>({...n,[e]:t}))},A=async e=>{e.preventDefault();try{let t=new FormData(e.target),n=Object.fromEntries(t.entries()),s=[{instrumentId:184,value:n["input-68"],score:0,comment:n["input-68_comment"]},{instrumentId:185,value:null,score:0,comment:n["input-69_comment"]},{instrumentId:186,value:n["input-70"],score:0,comment:n["input-70_comment"]},{instrumentId:187,value:n["input-71"],score:0,comment:n["input-71_comment"]},{instrumentId:189,value:"".concat(n["input-72_sub_189"]),score:0,comment:"".concat(n["input-72_comment_sub_189"])},{instrumentId:190,value:"".concat(n["input-72_sub_190"]),score:0,comment:"".concat(n["input-72_comment_sub_190"])},{instrumentId:191,value:"".concat(n["input-72_sub_191"]),score:0,comment:"".concat(n["input-72_comment_sub_191"])},{instrumentId:193,value:"".concat(n["input-73_sub_193"]),score:0,comment:"".concat(n["input-73_comment_sub_193"])},{instrumentId:194,value:"".concat(n["input-73_sub_194"]),score:0,comment:"".concat(n["input-73_comment_sub_194"])},{instrumentId:195,value:"".concat(n["input-73_sub_195"]),score:0,comment:"".concat(n["input-73_comment_sub_195"])}],a=await r.Z.post("https://swhytbiyrgsovsl-evfpthsuvq-et.a.run.app/response",s,{headers:{Authorization:"Bearer ".concat(j)}});200===a.status&&(localStorage.clear(),N(!0),I.push("/data-diri"))}catch(e){console.error("Error posting data:",e)}finally{N(!1)}};return b?(0,s.jsx)("div",{className:"min-h-screen w-full flex justify-center items-center",children:(0,s.jsx)(m.fCD,{className:"animate-spin text-accent",size:50})}):(0,s.jsxs)("div",{className:"bg-[#F1F1F7] h-screen overflow-x-hidden",children:[(0,s.jsx)(o.Z,{activeId:1,onClick:()=>{g.current&&(N(!1),g.current.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})))}}),(0,s.jsxs)("div",{className:"w-full ml-[344px] space-y-6 p-4",children:[(0,s.jsxs)("div",{className:"bg-[#1446AB] p-4 rounded-2xl w-[1048px] h-[115px]",children:[(0,s.jsx)("p",{className:"text-white font-extrabold text-xl",children:"BAGIAN IIâ€”KESIAPAN UNTUK MEMBERIKAN LAYANAN SEPERTI YANG DIURAI DALAM PPAM"}),(0,s.jsx)("hr",{className:"w-full my-4 mx-auto"}),(0,s.jsx)("p",{className:"uppercase font-medium text-base text-white",children:"Kegiatan prioritas lainnya: Perawatan aborsi yang aman sesuai dengan hukum yang berlaku"})]}),(0,s.jsxs)("form",{onSubmit:e=>{A(e),N(!0)},ref:g,children:[d.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)(c.Z,{type:e.type,label:e.question,no:e.number,name:"input-".concat(e.number),options:e.choice?e.choice.map(e=>({value:e.value,label:e.value})):[],placeholder:"Komentar/Referensi/Rincian...",onChange:(e,t)=>E(e,t),subname:e.subname,subquestions:e.sub||[]})},t)),(0,s.jsxs)("div",{className:"flex items-center ml-80 my-10 gap-x-5 w-3/12",children:[(0,s.jsx)(a.Z,{label:"Sebelumnya",onClick:()=>{console.log("Back button clicked"),I.push("/assessment/bagian-2/assessment-8")},withIcon:"left",variant:"secondary",type:"button"}),(0,s.jsx)(a.Z,{label:"Submit",withIcon:"right",type:"submit"})]})]})]})]})}}},function(e){e.O(0,[699,452,240,485,732,97,971,23,744],function(){return e(e.s=7237)}),_N_E=e.O()}]);