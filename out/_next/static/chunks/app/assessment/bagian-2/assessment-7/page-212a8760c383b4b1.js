(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{7550:function(e,t,n){Promise.resolve().then(n.bind(n,7357))},7357:function(e,t,n){"use strict";n.r(t);var s=n(7437),c=n(2265),a=n(3153),o=n(6463),u=n(8441),r=n(9714),i=n(1942),m=n(555),l=n(8472);t.default=()=>{let[e,t]=(0,c.useState)(!1),[n,_]=(0,c.useState)({}),[p,d]=(0,c.useState)([]),[b,h]=(0,c.useState)(!1),[f,v]=(0,c.useState)(null),[I,x]=(0,c.useState)(""),g=(0,o.useRouter)(),w=sessionStorage.getItem("accessToken"),y=(0,c.useRef)(null),[N,k]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(w)try{let e=(0,r.o)(w);console.log("Decoded Token:",e),x(e.username||""),setStatus(e.status||"")}catch(e){console.error("Failed to decode token:",e)}else g.push("/")},[g]),(0,c.useEffect)(()=>{h(!0),fetch("https://swhytbiyrgsovsl-evfpthsuvq-et.a.run.app/instrument").then(e=>{if(!e.ok)throw Error("Network response was not ok: ".concat(e.statusText));return e.json()}).then(e=>{if(console.log("Data fetched:",e),e&&Array.isArray(e.data)){let t=e.data.filter(e=>e.number>=58&&e.number<=62);console.log("Filtered Data:",t),d(t)}else throw console.error("Invalid data format received:",e),Error("Invalid data format")}).catch(e=>{console.error("Error fetching data:",e)}).finally(()=>{h(!1)})},[]),(0,c.useEffect)(()=>{p.length>0&&t(p.every(e=>n["input-".concat(e.number)]))},[n,p]);let E=(e,t)=>{_(n=>({...n,[e]:t}))},j=async e=>{e.preventDefault();try{k(!0);let t=new FormData(e.target),n=Object.fromEntries(t.entries()),s=[{instrumentId:138,value:null,score:0,comment:n["input-58_comment"]},{instrumentId:139,value:n["input-59"],score:0,comment:n["input-59_comment"]},{instrumentId:141,value:"".concat(n["input-60_sub_141"]),score:0,comment:"".concat(n["input-60_comment_sub_141"])},{instrumentId:142,value:"".concat(n["input-60_sub_142"]),score:0,comment:"".concat(n["input-60_comment_sub_142"])},{instrumentId:143,value:"".concat(n["input-60_sub_143"]),score:0,comment:"".concat(n["input-60_comment_sub_143"])},{instrumentId:144,value:"".concat(n["input-60_sub_144"]),score:0,comment:"".concat(n["input-60_comment_sub_144"])},{instrumentId:145,value:"".concat(n["input-60_sub_145"]),score:0,comment:"".concat(n["input-60_comment_sub_145"])},{instrumentId:146,value:"".concat(n["input-60_sub_146"]),score:0,comment:"".concat(n["input-60_comment_sub_146"])},{instrumentId:147,value:"".concat(n["input-60_sub_147"]),score:0,comment:"".concat(n["input-60_comment_sub_147"])},{instrumentId:148,value:"".concat(n["input-60_sub_148"]),score:0,comment:"".concat(n["input-60_comment_sub_148"])},{instrumentId:149,value:"".concat(n["input-60_sub_149"]),score:0,comment:"".concat(n["input-60_comment_sub_149"])},{instrumentId:150,value:"".concat(n["input-60_sub_150"]),score:0,comment:"".concat(n["input-60_comment_sub_150"])},{instrumentId:152,value:"".concat(n["input-61_sub_152"]),score:0,comment:"".concat(n["input-61_comment_sub_152"])},{instrumentId:153,value:"".concat(n["input-61_sub_153"]),score:0,comment:"".concat(n["input-61_comment_sub_153"])},{instrumentId:154,value:"".concat(n["input-61_sub_154"]),score:0,comment:"".concat(n["input-61_comment_sub_154"])},{instrumentId:155,value:"".concat(n["input-61_sub_155"]),score:0,comment:"".concat(n["input-61_comment_sub_155"])},{instrumentId:156,value:"".concat(n["input-61_sub_156"]),score:0,comment:"".concat(n["input-61_comment_sub_156"])},{instrumentId:157,value:"".concat(n["input-61_sub_157"]),score:0,comment:"".concat(n["input-61_comment_sub_157"])},{instrumentId:158,value:"".concat(n["input-61_sub_158"]),score:0,comment:"".concat(n["input-61_comment_sub_158"])},{instrumentId:160,value:"".concat(n["input-62_sub_160"]),score:0,comment:"".concat(n["input-62_comment_sub_160"])},{instrumentId:161,value:"".concat(n["input-62_sub_161"]),score:0,comment:"".concat(n["input-62_comment_sub_161"])},{instrumentId:162,value:"".concat(n["input-62_sub_162"]),score:0,comment:"".concat(n["input-62_comment_sub_162"])}],c=await l.Z.post("https://swhytbiyrgsovsl-evfpthsuvq-et.a.run.app/response",s,{headers:{Authorization:"Bearer ".concat(w)}});200===c.status&&g.push("/assessment/bagian-2/assessment-8")}catch(e){console.error("Error posting data:",e)}finally{k(!1)}};return b?(0,s.jsx)("div",{className:"min-h-screen w-full flex justify-center items-center",children:(0,s.jsx)(i.fCD,{className:"animate-spin text-accent",size:50})}):(0,s.jsxs)("div",{className:"bg-[#F1F1F7] h-screen overflow-x-hidden",children:[(0,s.jsx)(m.Z,{activeId:1,onClick:()=>{y.current&&(k(!1),y.current.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})))}}),(0,s.jsxs)("div",{className:"w-full ml-[344px] space-y-6 p-4",children:[(0,s.jsxs)("div",{className:"bg-[#1446AB] p-4 rounded-2xl w-[1048px] h-[115px]",children:[(0,s.jsx)("p",{className:"text-white font-extrabold text-xl",children:"BAGIAN IIâ€”KESIAPAN UNTUK MEMBERIKAN LAYANAN SEPERTI YANG DIURAI DALAM PPAM"}),(0,s.jsx)("hr",{className:"w-full my-4 mx-auto"}),(0,s.jsx)("p",{className:"uppercase font-medium text-base text-white",children:"Komponen PPAM 7: Layananminum kesehatan Balita"})]}),(0,s.jsxs)("form",{ref:y,onSubmit:e=>{j(e),k(!0)},className:"flex flex-col gap-y-5",children:[p.map((e,t)=>(0,s.jsx)("div",{className:"",children:(0,s.jsx)(a.Z,{type:e.type,no:e.number,label:e.question,name:"input-".concat(e.number),options:e.choice?e.choice.map(e=>({value:e.value,label:e.value})):[],placeholder:"Komentar/Referensi/Rincian...",onChange:(e,t)=>E(e,t),subname:e.subname,subquestions:e.sub||[]})},t)),(0,s.jsxs)("div",{className:"flex items-center ml-80 my-10 gap-x-5 w-3/12",children:[(0,s.jsx)(u.Z,{label:"Sebelumnya",onClick:()=>{g.push("/assessment/bagian-2/assessmnet-6")},withIcon:"left",variant:"secondary",type:"button"}),(0,s.jsx)(u.Z,{label:"Berikutnya",withIcon:"right",type:"submit"})]})]})]})]})}},9714:function(e,t,n){"use strict";n.d(t,{o:function(){return c}});class s extends Error{}function c(e,t){let n;if("string"!=typeof e)throw new s("Invalid token specified: must be a string");t||(t={});let c=!0===t.header?0:1,a=e.split(".")[c];if("string"!=typeof a)throw new s(`Invalid token specified: missing part #${c+1}`);try{n=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var n;return n=t,decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(e){return atob(t)}}(a)}catch(e){throw new s(`Invalid token specified: invalid base64 for part #${c+1} (${e.message})`)}try{return JSON.parse(n)}catch(e){throw new s(`Invalid token specified: invalid json for part #${c+1} (${e.message})`)}}s.prototype.name="InvalidTokenError"}},function(e){e.O(0,[699,452,240,485,97,971,23,744],function(){return e(e.s=7550)}),_N_E=e.O()}]);